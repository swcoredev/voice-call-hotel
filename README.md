# Voice Call Hotel — Модули и API

## Описание модулей

- **tts** — синтез речи (Text-to-Speech). Генерирует аудиофайлы на основе текста, поддерживает ElevenLabs API.
- **stt** — распознавание речи (Speech-to-Text). Принимает аудиофайлы, конвертирует их в нужный формат и отправляет в Whisper/OpenAI для транскрипции.
- **lang** — определение намерения (Intent Detection). Анализирует текстовые запросы пользователя и определяет их смысл.

## Примеры API-запросов

- `GET  /api/v1/tts/welcome` — получить приветственное аудиосообщение (отдаёт файл из static, например, ElevenLabs_Untitled_Project.wav)
- `POST /api/v1/stt/process` — отправить аудиофайл для распознавания речи (multipart/form-data)
- `POST /api/v1/lang/analyze` — анализ текста для определения намерения

## Особенности работы stt

Модуль **stt** автоматически конвертирует любые аудиоформаты (mp3, wav, m4a и др.), поддерживаемые ffmpeg, в формат WAV 16kHz mono перед отправкой на распознавание. Это обеспечивает совместимость с большинством аудиофайлов.

---

## Изменения в TTS
- Добавлен эндпоинт `/api/v1/tts/welcome`, который отдаёт статический аудиофайл из папки `static` (например, ElevenLabs_Untitled_Project.wav).
- Для тестирования синтеза речи через ElevenLabs добавлен скрипт `test_tts.py` (см. папку `voice_call_handler/tts/`).
- Вся чувствительная информация (API-ключи, voice_id и т.д.) хранится в `.env`. 